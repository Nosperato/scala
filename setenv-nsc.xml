<?xml version="1.0" encoding="UTF-8"?>

<project name="scala.nsc" default="setenv">

  <target name="setenv">

    <property file="build-nsc.properties.${platform}" prefix="nsc." />

    <echoproperties prefix="nsc." format="xml" destfile="/tmp/env_${user.name}.xml" />

    <!-- generate "env.sh" (Unix) -->

    <xslt in="/tmp/env_${user.name}.xml" out="/tmp/env_${user.name}.sh" style="setenv-sh.xsl" />
    <copy file="/tmp/env_${user.name}.sh" tofile="env.sh">
      <filterchain>
        <tokenfilter>
          <ignoreblank />
        </tokenfilter>
      </filterchain>
    </copy>

    <!-- generate "env.bat" (Windows) -->

    <xslt in="/tmp/env_${user.name}.xml" out="/tmp/env_${user.name}.bat" style="setenv-bat.xsl" />
    <copy file="/tmp/env_${user.name}.bat" tofile="env.bat">
      <filterchain>
        <tokenfilter>
          <ignoreblank />
        </tokenfilter>
      </filterchain>
    </copy>

  </target>

</project>

