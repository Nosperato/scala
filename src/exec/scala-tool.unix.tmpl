#!/bin/bash

##############################################################################
# Copyright @copyright@
#
# This is free software; see the distribution for copying conditions.
# There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.
##############################################################################

cygwin=false;
darwin=false;
case "`uname`" in
    CYGWIN*) cygwin=true ;;
    Darwin*) darwin=true ;;
esac

SOURCE=$0;
SCRIPT=`basename "$SOURCE"`;
while [ -h "$SOURCE" ]; do
    SCRIPT=`basename "$SOURCE"`;
    LOOKUP=`ls -ld "$SOURCE"`;
    TARGET=`expr "$LOOKUP" : '.*-> \(.*\)$'`;
    if expr "${TARGET:-.}/" : '/.*/$' > /dev/null; then
        SOURCE=${TARGET:-.};
    else
        SOURCE=`dirname "$SOURCE"`/${TARGET:-.};
    fi;
done;
PREFIX=`dirname "$SOURCE"`/..;
prefix=$PREFIX;
PREFIX=`cd "$PREFIX"; pwd`;

JAVA=java
JAVA_CLASSPATH=@fjbg.jar@:@msil.jar@:@comp.path@:@lib.path@
TOOL=@tool.class@
TOOL_CLASSPATH=@lib.path@

# For Cygwin, switch paths to appropriate format before running java
if $cygwin; then
    if [ "$OS" = "Windows_NT" ] && cygpath -m .>/dev/null 2>/dev/null ; then
        format=mixed
    else
        format=windows
    fi
    JAVA_CLASSPATH=`cygpath --path --$format "$JAVA_CLASSPATH"`
    TOOL_CLASSPATH=`cygpath --path --$format "$TOOL_CLASSPATH"`
fi

$JAVA \
  -Xms16M -Xmx256M \
  -Dscala.version="20051219-1541" \
  -Dscala.home="$PREFIX" \
  -Dscala.boot.class.path="$TOOL_CLASSPATH" \
  -cp "$JAVA_CLASSPATH" \
  "$TOOL" "$@"